<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                &times;
            </button>
            <h4 class="modal-title">Nuevo Representante</h4>
        </div>
        <div class="modal-body no-padding">

            <form id="formNewAgent" class="smart-form" novalidate="novalidate">
                <header>
                    Datos del Representante > Contacto y Facturación
                </header>
                <fieldset>
                    <div class="row">
                        <section class="col col-6">
                            <label class="input"> <i class="icon-prepend fa fa-address-card"></i>
                                <input type="text" name="agent_modal_identification" id="agent_modal_identification" placeholder="Cédula" readonly>
                            </label>
                        </section>
                    </div>

                    <div class="row">
                        <section class="col col-6">
                            <label class="input"> <i class="icon-prepend fa fa-user"></i>
                                <input type="text" name="agent_modal_lname" id="agent_modal_lname" placeholder="Apellidos completos">
                            </label>
                        </section>
                        <section class="col col-6">
                            <label class="input"> <i class="icon-prepend fa fa-user"></i>
                                <input type="text" name="agent_modal_fname" id="agent_modal_fname" placeholder="Nombres completos">
                            </label>
                        </section>
                    </div>

                    <div class="row">
                        <section class="col col-6">
                            <label class="input"> <i class="icon-prepend fa fa-envelope-o"></i>
                                <input type="email" name="agent_modal_email" id="agent_modal_email" placeholder="E-mail">
                            </label>
                        </section>
                        <section class="col col-6">
                            <label class="input"> <i class="icon-prepend fa fa-phone"></i>
                                <input type="tel" id="agent_modal_phone" name="agent_phone" placeholder="Teléfono">
                            </label>
                        </section>
                    </div>
                </fieldset>

                <footer>
                    <button type="button" id="btnSaveAgent" class="btn btn-primary">
                        Guardar
                    </button>
                    <button type="button" id="btnCancelar" class="btn btn-default">
                        Cancelar
                    </button>
                </footer>
            </form>

            <script type="text/javascript">

                var errorClass = 'invalid';
                var errorElement = 'em';

                // Load form valisation dependency
                loadScript("js/plugin/jquery-form/jquery-form.min.js", $formRegister);

                // Validaciones del formulario
                var $formRegister = $("#formNewAgent").validate({
                    errorClass		: errorClass,
                    errorElement	: errorElement,
                    highlight: function(element) {
                        $(element).parent().removeClass('state-success').addClass("state-error");
                        $(element).removeClass('valid');
                    },
                    unhighlight: function(element) {
                        $(element).parent().removeClass("state-error").addClass('state-success');
                        $(element).addClass('valid');
                    },

                    // Rules for form validation
                    rules : {
                        agent_modal_fname : {
                            required : true
                        },
                        agent_modal_lname : {
                            required : true
                        },
                        agent_agent_email : {
                            required : true,
                            email : true
                        },
                        agent_modal_phone : {
                            required : true
                        }
                    },

                    // Messages for form validation
                    messages : {
                        agent_modal_fname : {
                            required : 'Por favor ingrese los Nombres completos'
                        },
                        agent_modal_lname : {
                            required : 'Por favor ingrese los Apellidos completos'
                        },
                        agent_modal_email : {
                            required : 'Por favor ingrese un Email',
                            email : 'Por favor ingrese un email VALIDO'
                        },
                        agent_modal_phone : {
                            required : 'Por favor ingrese un número de Teléfono'
                        }
                    },
                    // Do not change code below
                    errorPlacement : function(error, element) {
                        error.insertAfter(element.parent());
                    }
                });

                // Enmascaramiento de inputs
                $("#agent_modal_phone").mask("(999) 999-9999");

                //Guardar datos
                $('#btnSaveAgent').click(function () {



                    $("#formNewAgent").ajaxSubmit({
                        url:"/agent",
                        type: 'post',
                        dataType: "json",
                        success:function(dato){
                            if(dato.status){
                                alert('bien');
//                                $('#muestraRegistro').DataTable().destroy();
//                                JS_armaTablaRgistros();
//                                JS_succesGrd('confirmation','<div class="box-grey etiqueta">'+dato.message+'</div>','auto','Atención');
//                                $.processBar.close();
                            }else{
//                                JS_msgAlert(2,dato.message,'');
//                                $.processBar.close();
                            }
                        }
                    });


                });

                // Cerrar Ventana Modal
                $("#btnCancelar").click(function () {
                    JS_cerrarModal("#remoteModal");
                });

                function JS_cerrarModal(j){
                    $(""+j+"").modal('hide');
                    $(""+j+"").html("&nbsp;");
                }
            </script>
        </div>
    </div>
</div>
